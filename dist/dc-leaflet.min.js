/*!
 * dc-leaflet v0.3.0
 * http://intellipharm.com/
 *
 * Copyright 2015 Intellipharm
 *
 * 2015-03-27 10:44:37
 *
 */
!function(){"use strict";dc.baseGoogleChart=function(a){return a=dc.baseMapChart(a),a._doRender=function(){var b=new google.maps.Map(a.root().node(),a.mapOptions());return a.center()&&a.zoom()&&(b.setCenter(a.toLocArray(a.center())),b.setZoom(a.zoom())),a.map(b),a._postRender(),a._doRedraw()},a.toLocArray=function(a){return"string"==typeof a&&(a=a.split(",")),new google.maps.LatLng(a[0],a[1])},a}}(),function(){"use strict";dc.baseLeafletChart=function(a){return a=dc.baseMapChart(a),a._doRender=function(){var b=L.map(a.root().node(),a.mapOptions());return a.center()&&a.zoom()&&b.setView(a.toLocArray(a.center()),a.zoom()),a.tiles()(b),a.map(b),a._postRender(),a._doRedraw()},a.toLocArray=function(a){return"string"==typeof a&&(a=a.split(",")),a},a}}(),function(){"use strict";dc.baseMapChart=function(a){a=dc.baseChart(a);var b,c=!0,d=!1,e=!1,f=!1,g=function(a){L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(a)},h=function(b){return a.title()(b)};return a._doRender=function(){},a._postRender=function(){},a.toLocArray=function(){},a.mapOptions=function(b){return arguments.length?(d=b,a):d},a.center=function(b){return arguments.length?(e=b,a):e},a.zoom=function(b){return arguments.length?(f=b,a):f},a.tiles=function(b){return arguments.length?(g=b,a):g},a.map=function(a){return arguments.length?b=a:b},a.popup=function(b){return arguments.length?(h=b,a):h},a.renderPopup=function(b){return arguments.length?(c=b,a):c},a}}(),function(){"use strict";dc.googleMarkerChart=function(a,b){var c=dc.baseGoogleChart({}),d=!1,e=!1,f=!1,g=!0,h=!1,i=!0,j=!1,k=!1,l=!1,m=!1,n=[],o=[],p=!1;c.renderTitle(!0);var q=function(a){return c.keyAccessor()(a)},r=function(a){var b=new google.maps.Marker({position:c.toLocArray(c.locationAccessor()(a)),map:c.map(),title:c.renderTitle()?c.title()(a):"",clickable:c.renderPopup()||c.brushOn()&&!h,draggable:!1});return b};c._postRender=function(){c.brushOn()&&(h&&c.filterHandler(u),google.maps.event.addListener(c.map(),"zoom_changed",function(){t("zoom")},this),google.maps.event.addListener(c.map(),"dragend",function(){t("drag")},this),h||google.maps.event.addListener(c.map(),"click",function(){t("click")},this))},c._doRedraw=function(){var a=c._computeOrderedGroups(c.data()).filter(function(a){return 0!==c.valueAccessor()(a)});p=a,f&&(n=[]);var b=[],d=[],e=new google.maps.LatLngBounds;o=[],a.forEach(function(a){var g=c.keyAccessor()(a),h=null;!f&&g in n&&(h=n[g]),a.value?(null===h?h=s(a,g):h.setVisible(!0),e.extend(h.getPosition()),d.push(h),c.cluster()&&b.push(h),o.push(h)):null!==h&&h.setVisible(!1)}),c.cluster()&&b.length>0,d.length&&(i||j&&!k)&&c.map().fitBounds(e),k=!1,i=!1},c.locationAccessor=function(a){return arguments.length?(q=a,c):q},c.marker=function(a){return arguments.length?(r=a,c):r},c.icon=function(a){return arguments.length?(_icon=a,c):_icon},c.cluster=function(a){return arguments.length?(d=a,c):d},c.clusterOptions=function(a){return arguments.length?(e=a,c):e},c.rebuildMarkers=function(a){return arguments.length?(f=a,c):f},c.brushOn=function(a){return arguments.length?(g=a,c):g},c.filterByArea=function(a){return arguments.length?(h=a,c):h},c.fitOnRender=function(a){return arguments.length?(i=a,c):i},c.fitOnRedraw=function(a){return arguments.length?(j=a,c):j},c.markerGroup=function(){return m},c.markers=function(a){return a?o:n};var s=function(a,b){var d=r(a);return d.key=b,c.renderPopup()&&google.maps.event.addListener(d,"click",function(){c.popup()(a,d).open(c.map(),d)}),c.brushOn()&&!h&&d.on("click",v),n[b]=d,d},t=function(a){if(k=!0,h){var b;b=c.map().getCenter().equals(c.toLocArray(c.center()))&&c.map().getZoom()===c.zoom()?null:c.map().getBounds(),dc.events.trigger(function(){c.filter(null),b&&(l=!0,c.filter(b),l=!1),dc.redrawAll(c.chartGroup())})}else c.filter()&&("click"===a||c.filter()in n&&!c.map().getBounds().contains(n[c.filter()].getLatLng()))&&dc.events.trigger(function(){c.filter(null),_renderPopup&&c.map().closePopup(),dc.redrawAll(c.chartGroup())})},u=function(a,b){k=!0,c.dimension().filter(null),b&&b.length>0&&(c.dimension().filterFunction(function(a){if(!(a in n))return!1;var c=n[a].position;return c&&b[0].contains(c)}),l||c.map().getBounds().toString===b[0].toString()||c.map().fitBounds(b[0]))},v=function(a){if(a.target){k=!0;var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)}}(),function(){"use strict";dc.leafletChoroplethChart=function(a,b){var c=dc.colorChart(dc.baseLeafletChart({})),d=!1,e=[],f=!1,g={fillColor:"black",color:"gray",opacity:.4,fillOpacity:.6,weight:1},h=function(a){return a.key},i=function(a){var b=c.featureOptions();b instanceof Function&&(b=b(a)),b=JSON.parse(JSON.stringify(b));var d=e[c.featureKeyAccessor()(a)];return d&&d.d&&(b.fillColor=c.getColor(d.d,d.i),-1!==c.filters().indexOf(d.d.key)&&(b.opacity=.8,b.fillOpacity=1)),b};c._postRender=function(){d=L.geoJson(c.geojson(),{style:c.featureStyle(),onEachFeature:j}),c.map().addLayer(d)},c._doRedraw=function(){d.clearLayers(),e=[],c._computeOrderedGroups(c.data()).forEach(function(a,b){e[c.keyAccessor()(a)]={d:a,i:b}}),d.addData(c.geojson())},c.geojson=function(a){return arguments.length?(f=a,c):f},c.featureOptions=function(a){return arguments.length?(g=a,c):g},c.featureKeyAccessor=function(a){return arguments.length?(h=a,c):h},c.featureStyle=function(a){return arguments.length?(i=a,c):i};var j=function(a,b){var d=e[c.featureKeyAccessor()(a)];d&&d.d&&(b.key=d.d.key,c.renderPopup()&&b.bindPopup(c.popup()(d.d,a)),c.brushOn()&&b.on("click",k))},k=function(a){if(a.target){var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)}}(),function(){"use strict";dc.leafletMarkerChart=function(a,b){var c=dc.baseLeafletChart({}),d=!1,e=!1,f=!1,g=!0,h=!1,i=!0,j=!1,k=!1,l=!1,m=!1,n=!1,o=[],p=[],q=!1;c.renderTitle(!0);var r=function(a){return c.keyAccessor()(a)},s=function(a){var b=new L.Marker(c.toLocArray(c.locationAccessor()(a)),{title:c.renderTitle()?c.title()(a):"",alt:c.renderTitle()?c.title()(a):"",icon:t(),clickable:c.renderPopup()||c.brushOn()&&!h,draggable:!1});return b},t=function(){return new L.Icon.Default};c._postRender=function(){c.brushOn()&&(h&&c.filterHandler(x),c.map().on("zoomend moveend",w,this),h||c.map().on("click",w,this),c.map().on("zoomstart",v,this)),n=d?new L.MarkerClusterGroup(e?e:null):new L.LayerGroup,c.map().addLayer(n)},c._doRedraw=function(){var a=c._computeOrderedGroups(c.data()).filter(function(a){return 0!==c.valueAccessor()(a)});q=a,f&&(o=[]),n.clearLayers();var b=[],d=[];p=[],a.forEach(function(a){if(a.value){var e=c.keyAccessor()(a),g=null;g=!f&&e in o?o[e]:u(a,e),d.push(g),c.cluster()?b.push(g):n.addLayer(g),p.push(g)}}),c.cluster()&&b.length>0&&n.addLayers(b),d.length&&(i||j&&!k)&&(d=new L.featureGroup(d),c.map().fitBounds(d.getBounds())),k=!1,i=!1},c.locationAccessor=function(a){return arguments.length?(r=a,c):r},c.marker=function(a){return arguments.length?(s=a,c):s},c.icon=function(a){return arguments.length?(t=a,c):t},c.cluster=function(a){return arguments.length?(d=a,c):d},c.clusterOptions=function(a){return arguments.length?(e=a,c):e},c.rebuildMarkers=function(a){return arguments.length?(f=a,c):f},c.brushOn=function(a){return arguments.length?(g=a,c):g},c.filterByArea=function(a){return arguments.length?(h=a,c):h},c.fitOnRender=function(a){return arguments.length?(i=a,c):i},c.fitOnRedraw=function(a){return arguments.length?(j=a,c):j},c.markerGroup=function(){return n},c.markers=function(a){return a?p:o};var u=function(a,b){var d=s(a);return d.key=b,c.renderPopup()&&d.bindPopup(c.popup()(a,d)),c.brushOn()&&!h&&d.on("click",y),o[b]=d,d},v=function(){m=!0},w=function(a){if("moveend"!==a.type||!m&&!a.hard)if(m=!1,k=!0,h){var b;b=c.map().getCenter().equals(c.center())&&c.map().getZoom()===c.zoom()?null:c.map().getBounds(),dc.events.trigger(function(){c.filter(null),b&&(l=!0,c.filter(b),l=!1),dc.redrawAll(c.chartGroup())})}else c.filter()&&("click"===a.type||c.filter()in o&&!c.map().getBounds().contains(o[c.filter()].getLatLng()))&&dc.events.trigger(function(){c.filter(null),_renderPopup&&c.map().closePopup(),dc.redrawAll(c.chartGroup())})},x=function(a,b){k=!0,c.dimension().filter(null),b&&b.length>0&&(c.dimension().filterFunction(function(a){if(!(a in o))return!1;var c=o[a].getLatLng();return c&&b[0].contains(c)}),l||c.map().getBounds().toString===b[0].toString()||c.map().fitBounds(b[0]))},y=function(a){if(a.target){k=!0;var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)}}();
//# sourceMappingURL=dc-leaflet.min.map