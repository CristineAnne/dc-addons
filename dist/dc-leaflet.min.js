/*!
 * dc-leaflet v0.1.2
 * http://intellipharm.com/
 *
 * Copyright 2015 Intellipharm
 *
 * 2015-03-20 15:53:48
 *
 */
dc.baseLeafletChart=function(a){a=dc.baseChart(a);var b,c=!1,d=!1,e=!1,f=function(a){L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}).addTo(a)};return a._doRender=function(){return b=L.map(a.root().node(),c),d&&e&&b.setView(a.toLocArray(d),e),a.tiles()(b),a._postRender(),a._doRedraw()},a._postRender=function(){},a.mapOptions=function(b){return arguments.length?(c=b,a):c},a.center=function(b){return arguments.length?(d=b,a):d},a.zoom=function(b){return arguments.length?(e=b,a):e},a.tiles=function(b){return arguments.length?(f=b,a):f},a.map=function(){return b},a.toLocArray=function(a){return"string"==typeof a&&(a=a.split(",")),a},a},dc.leafletChoroplethChart=function(a,b){var c=dc.colorChart(dc.baseLeafletChart({})),d=!1,e=[],f=!1,g=!0,h=!0,i={fillColor:"black",color:"gray",opacity:.4,fillOpacity:.6,weight:1},j=function(a){return a.key},k=function(a){var b=c.featureOptions();b instanceof Function&&(b=b(a)),b=JSON.parse(JSON.stringify(b));var d=e[c.featureKeyAccessor()(a)];return d&&d.d&&(b.fillColor=c.getColor(d.d,d.i),-1!=c.filters().indexOf(d.d.key)&&(b.opacity=.8,b.fillOpacity=1)),b},l=function(a){return c.title()(a)};c._postRender=function(){d=L.geoJson(c.geojson(),{style:c.featureStyle(),onEachFeature:m}),c.map().addLayer(d)},c._doRedraw=function(){d.clearLayers(),e=[],c._computeOrderedGroups(c.data()).forEach(function(a,b){e[c.keyAccessor()(a)]={d:a,i:b}}),d.addData(c.geojson())},c.geojson=function(a){return arguments.length?(f=a,c):f},c.featureOptions=function(a){return arguments.length?(i=a,c):i},c.featureKeyAccessor=function(a){return arguments.length?(j=a,c):j},c.featureStyle=function(a){return arguments.length?(k=a,c):k},c.popup=function(a){return arguments.length?(l=a,c):l},c.renderPopup=function(a){return arguments.length?(g=a,c):g},c.brushOn=function(a){return arguments.length?(h=a,c):h};var m=function(a,b){var d=e[c.featureKeyAccessor()(a)];d&&d.d&&(b.key=d.d.key,c.renderPopup()&&b.bindPopup(c.popup()(d.d,a)),c.brushOn()&&b.on("click",n))},n=function(a){if(a.target){var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)},dc.leafletMarkerChart=function(a,b){var c=dc.baseLeafletChart({}),d=!0,e=!1,f=!1,g=!1,h=!0,i=!1,j=!1,k=!1,l=!1,m=[],n=!1;c.renderTitle(!0);var o=function(a){return c.keyAccessor()(a)},p=function(a){var b=new L.Marker(c.toLocArray(c.locationAccessor()(a)),{title:c.renderTitle()?c.title()(a):"",alt:c.renderTitle()?c.title()(a):"",icon:q(),clickable:c.renderPopup()||c.brushOn()&&!i,draggable:!1});return b},q=function(){return new L.Icon.Default},r=function(a){return c.title()(a)};c._postRender=function(){c.brushOn()&&(i&&c.filterHandler(v),c.map().on("zoomend moveend",u,this),i||c.map().on("click",u,this),c.map().on("zoomstart",t,this)),l=e?new L.MarkerClusterGroup(f?f:null):new L.LayerGroup,c.map().addLayer(l)},c._doRedraw=function(){var a=c._computeOrderedGroups(c.data()).filter(function(a){return 0!==c.valueAccessor()(a)});n=a,g&&(m=[]),l.clearLayers();var b=[];a.forEach(function(a){if(a.value){var d=c.keyAccessor()(a),e=null;e=!g&&d in m?m[d]:s(a,d),c.cluster()?b.push(e):l.addLayer(e)}}),c.cluster()&&b.length>0&&l.addLayers(b)},c.locationAccessor=function(a){return arguments.length?(o=a,c):o},c.marker=function(a){return arguments.length?(p=a,c):p},c.icon=function(a){return arguments.length?(q=a,c):q},c.popup=function(a){return arguments.length?(r=a,c):r},c.renderPopup=function(a){return arguments.length?(d=a,c):d},c.cluster=function(a){return arguments.length?(e=a,c):e},c.clusterOptions=function(a){return arguments.length?(f=a,c):f},c.rebuildMarkers=function(a){return arguments.length?(g=a,c):g},c.brushOn=function(a){return arguments.length?(h=a,c):h},c.filterByArea=function(a){return arguments.length?(i=a,c):i},c.markerGroup=function(){return l};var s=function(a,b){var d=p(a);return d.key=b,c.renderPopup()&&d.bindPopup(c.popup()(a,d)),c.brushOn()&&!i&&d.on("click",w),m[b]=d,d},t=function(){k=!0},u=function(a){if("moveend"!=a.type||!k&&!a.hard)if(k=!1,i){var b;b=c.map().getCenter().equals(c.center())&&c.map().getZoom()==c.zoom()?null:c.map().getBounds(),dc.events.trigger(function(){c.filter(null),b&&(j=!0,c.filter(b),j=!1),dc.redrawAll(c.chartGroup())})}else c.filter()&&("click"==a.type||c.filter()in m&&!c.map().getBounds().contains(m[c.filter()].getLatLng()))&&dc.events.trigger(function(){c.filter(null),d&&c.map().closePopup(),dc.redrawAll(c.chartGroup())})},v=function(a,b){c.dimension().filter(null),b&&b.length>0&&(c.dimension().filterFunction(function(a){if(!(a in m))return!1;var c=m[a].getLatLng();return c&&b[0].contains(c)}),j||c.map().getBounds().toString==b[0].toString()||c.map().fitBounds(b[0]))},w=function(a){if(a.target){var b=a.target.key;dc.events.trigger(function(){c.filter(b),dc.redrawAll(c.chartGroup())})}};return c.anchor(a,b)};
//# sourceMappingURL=dc-leaflet.min.map