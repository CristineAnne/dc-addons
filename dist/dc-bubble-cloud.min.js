/*!
 * dc-addons v0.6.0
 *
 * 2015-04-10 12:36:14
 *
 */
!function(){"use strict";dc.bubbleCloud=function(a,b){function c(){0===o.length?d():e(),h(),n=d3.layout.force().nodes(i.data()).size([i.width(),i.height()]),n.gravity(j).charge(g).friction(l).on("tick",function(a){o.each(f(a.alpha)).attr("cx",function(a){return d3.select(this.parentNode).attr("transform","translate("+a.x+","+a.y+")"),0}).attr("cy",function(a){return 0})}),n.start(),setTimeout(function(){n.stop()},2e3)}function d(){q=p.selectAll("g").data(i.data()).enter().append("g").on("click",i.onClick),o=q.append("circle").attr("class","bubble").attr("r",0).attr("fill-opacity",1).attr("fill",function(a,b){return i.getColor(a,b)}).attr("stroke-width",2).on("mouseenter",function(a,b){d3.select(this).attr("stroke","#303030")}).on("mouseout",function(a,b){d3.select(this).attr("stroke","none")}),i._doRenderLabel(q),o.append("title").text(function(a){return i.renderTitle()?i.title()(a):void 0}),o.transition().duration(k).attr("r",function(a){return a.radius=i.bubbleR(a),a.x=Math.random()*i.width(),a.y=Math.random()*i.height(),a.radius})}function e(){o.data(i.data()).attr("r",function(a){return a.radius=i.bubbleR(a),a.radius}),i.doUpdateLabels(q)}function f(a){var b=d3.geom.quadtree(i.data());return function(c){var d=c.radius+d3.max(i.data().map(function(a){return a.radius}))+m,e=c.x-d,f=c.x+d,g=c.y-d,h=c.y+d;b.visit(function(b,d,i,j,k){if(b.point&&b.point!==c){var l=c.x-b.point.x,n=c.y-b.point.y,o=Math.sqrt(l*l+n*n),p=c.radius+b.point.radius+m;p>o&&(o=(o-p)/o*a,c.x-=l*=o,c.y-=n*=o,b.point.x+=l,b.point.y+=n)}return d>f||e>j||i>h||g>k})}}function g(a){return-Math.pow(a.radius,2)/8}function h(){q.each(i.hasFilter()?function(a){i.hasFilter(i.keyAccessor()(a))?i.highlightSelected(this):i.fadeDeselected(this)}:function(){i.resetHighlight(this)})}var i=dc.bubbleMixin(dc.coordinateGridMixin({})),j=.2,k=1500,l=.5,m=10,n=null,o=[],p=null,q=null;return i._doRender=function(){return i.resetSvg(),p=i.svg().append("g"),o=[],c(),i},i._doRedraw=function(){return c(),i},i.anchor(a,b)}}();
//# sourceMappingURL=dc-bubble-cloud.min.js.map